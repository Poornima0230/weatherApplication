let cityName = document.querySelector(".weather_City"), dateTime = document.querySelector(".weather_date_time"), w_forecast = document.querySelector(".weather_forecast"), w_icon = document.querySelector(".weather_icon"), w_temperature = document.querySelector(".weather_temperature"), w_minTem = document.querySelector(".weather_min"), w_maxTem = document.querySelector(".weather_max"), w_feelsLike = document.querySelector(".weather_feelsLike"), w_humidity = document.querySelector(".weather_humidity"), w_wind = document.querySelector(".weather_wind"), w_pressure = document.querySelector(".weather_pressure"), citySearch = document.querySelector(".weather_search"); const getCountryName = e => new Intl.DisplayNames([e], { type: "region" }).of(e), getDateTime = e => { let t = new Date(1e3 * e), r = { weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", minute: "numeric" }, a = new Intl.DateTimeFormat("en-US", r); return a.format(t) }; let city = "mumbai"; citySearch.addEventListener("submit", e => { e.preventDefault(); let t = document.querySelector(".city_name"); console.log(t.value), city = t.value, getWeatherData(), t.value = "" }); const getWeatherData = async () => { let e = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=8a0569e2986721b8792097db5d3e7b05`; try { let t = await fetch(e), r = await t.json(), { main: a, name: i, weather: n, wind: m, sys: w, dt: c } = r; cityName.innerHTML = `${i}, ${getCountryName(w.country)}`, dateTime.innerHTML = getDateTime(c), w_forecast.innerHTML = n[0].main, w_icon.innerHTML = `<img src=http://openweathermap.org/img/wn/${n[0].icon}.png alt="img not found">`, w_temperature.innerHTML = `${a.temp}&#176`, w_minTem.innerHTML = `${a.temp_min}&#176`, w_maxTem.innerHTML = `${a.temp_max}&#176`, w_feelsLike.innerHTML = `${a.feels_like}&#176`, w_humidity.innerHTML = `${a.humidity}&#176`, w_wind.innerHTML = `${m.deg}&#176`, w_pressure.innerHTML = `${a.pressure}` } catch (o) { console.log(o) } }; document.body.addEventListener("load", getWeatherData());